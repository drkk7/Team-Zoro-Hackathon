{% extends "base.html" %}
{% block title %}Assignment Results - Quiz Master V2{% endblock %}

{% block content %}
<div class="container-fluid min-vh-100 d-flex align-items-center justify-content-center py-5">
    <div class="row w-100 justify-content-center">
        <div class="col-md-8 col-lg-6">
            <div class="glass-card p-5 text-center">
                <div class="mb-4">
                    {# Use float filter and default to 0 if score_percentage is missing #}
                    {% set percent = score_percentage|default(0)|float %}
                    {% if percent >= 80 %}
                        <i class="fas fa-trophy text-warning" style="font-size: 4rem;"></i>
                    {% elif percent >= 60 %}
                        <i class="fas fa-medal text-info" style="font-size: 4rem;"></i>
                    {% else %}
                        <i class="fas fa-book text-primary" style="font-size: 4rem;"></i>
                    {% endif %}
                    
                    <h2 class="section-title mt-3">
                        {% if percent >= 80 %}
                            Excellent Work! üéâ
                        {% elif percent >= 60 %}
                            Good Job! üëç
                        {% else %}
                            Keep Learning! üìö
                        {% endif %}
                    </h2>
                </div>
                
                <div class="row mb-4">
                    <div class="col-md-6 mb-3">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title text-primary">
                                    <i class="fas fa-star me-2"></i>Your Score
                                </h5>
                                <h3 class="text-primary fw-bold">{{ score }}/{{ total }}</h3>
                                <p class="text-muted mb-0">{{ percent }}%</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-6 mb-3">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title text-success">
                                    <i class="fas fa-check-circle me-2"></i>Correct Answers
                                </h5>
                                <h3 class="text-success fw-bold">{{ score }}</h3>
                                <p class="text-muted mb-0">Out of {{ total }}</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="progress mb-4" style="height: 20px; border-radius: 10px;">
                    <div class="progress-bar" role="progressbar" 
                         style="width: {{ percent }}%; background: var(--primary-gradient);" 
                         aria-valuenow="{{ percent }}" aria-valuemin="0" aria-valuemax="100">
                        {{ percent }}%
                    </div>
                </div>
                
                <div class="d-grid gap-2 d-md-flex justify-content-md-center">
                    <a href="{{ url_for('main.user_dashboard', id=user.id, name=user.full_name) }}" 
                       class="btn-gradient">
                        <i class="fas fa-home me-2"></i>Back to Dashboard
                    </a>
                    <a href="{{ url_for('main.user_summary', user_id=user.id) }}" 
                       class="btn-success-gradient">
                        <i class="fas fa-chart-bar me-2"></i>View Summary
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .progress {
        background: rgba(255, 255, 255, 0.3);
        backdrop-filter: blur(10px);
    }
    
    .progress-bar {
        border-radius: 10px;
        font-weight: 600;
    }
</style>
{% endblock %}